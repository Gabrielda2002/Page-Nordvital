<!-- TapsContent.astro -->
---
import type { LucideIcon } from "lucide-react"
interface Props {
  tabs: {
    id: string;  
    title: string;
    icon?: LucideIcon | string;
  }[];
}

const { tabs } = Astro.props;
---

<div class="tabs-container w-full mx-auto my-4 p-5">
  <div class="flex flex-col lg:flex-row justify-center gap-4 border-b">
    {tabs.map((tab, index) => (
      <button
        data-tab={tab.id}
        class="tab-button flex items-center gap-2 p-4 cursor-pointer rounded-t-lg transition-all duration-300"
        class:list={[{ 'active': index === 0 }]}
      >
        {typeof tab.icon === "string" ? (
          <div set:html={tab.icon}></div>
        ) : tab.icon ? (
          <tab.icon className="w-5 h-5" />
        ) : null}
        <span>{tab.title}</span>
      </button>
    ))}
  </div>

  <div class="tab-content flex items-center justify-center p-10 bg-gray-200 rounded-lg shadow-md border border-gray-400/30">
    <slot />
  </div>
</div>

<script>
     
  const initTabs = () => {
    const tabs = document.querySelectorAll('.tab-button');
    const contents = document.querySelectorAll('[data-tab-content]');
  
    tabs[0].classList.add('active');
    contents[0].classList.add('active');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const target = (tab as HTMLElement).dataset.tab;
  
        // Remove active class from all tabs/contents
        tabs.forEach(t => t.classList.remove('active'));
        contents.forEach(c => c.classList.remove('active'));
        
        // Add active class to clicked tab and matching content
        tab.classList.add('active');
        document.querySelector(`[data-tab-content="${target}"]`)?.classList.add('active');
      });
    });

  }

  document.addEventListener('DOMContentLoaded', initTabs);
</script>

<style>
  /* Tab inactivo - Gris claro */
  .tab-button {
    background-color: #e2e8f0;
    color: #64748b;
    font-weight: 500;
  }

  /* Hover en tab inactivo */
  .tab-button:hover:not(.active) {
    background-color: #cbd5e1;
    color: #475569;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-bottom: 4px solid #0d9488;
  }

  /* Tab ACTIVO - Verde/Teal brillante */
  .tab-button.active {
    background-color: #0d9488;
    color: white;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(13, 148, 136, 0.4);
    transform: translateY(-5px);
  }

  :global([data-tab-content]) {
    display: none;
  }
  :global([data-tab-content].active) {
    display: block;
  }
</style>  
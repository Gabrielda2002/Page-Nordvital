---
// filepath: /c:/Users/PROGRAMACION/Desktop/app-nordvital/remake-web-page/tasty-telescope/src/components/common/Corousel.astro
import slider1 from "@/assets/Imgs_carousel/slider2.webp";
import slider2 from "@/assets/Imgs_carousel/slider1.webp";
import slider3 from "@/assets/Imgs_carousel/slider3.webp";
import slider4 from "@/assets/Imgs_carousel/slider4.webp";
import slider6 from "@/assets/Imgs_carousel/slider6.webp";
import slider7 from "@/assets/Imgs_carousel/slider7.webp";
import slider8 from "@/assets/Imgs_carousel/slider8.webp";
import slider9 from "@/assets/Imgs_carousel/slider9.webp";
import slider10 from "@/assets/Imgs_carousel/slider10.webp";

import { Image } from "astro:assets";

const images = [
  {
    src: slider10,
    alt: "Rayos X",
    telefono: "3174309873",
  },
  {
    src: slider6,
    alt: "Rayos X",
    telefono: "3174309873",
  },
  {
    src: slider3,
    alt: "Blanqueamiento dental",
    telefono: "3174309873",
  },
  {
    src: slider2,
    alt: "Consulta pediatrica",
    telefono: "3174309873",
  },
  {
    src: slider9,
    alt: "Medicina general",
    telefono: "3208420934",
  },
  {
    src: slider1,
    alt: "Perfil lipidico",
    telefono: "3174309873",
  },

  {
    src: slider8,
    alt: "Citologia",
    telefono: "3208420934",
  },
  {
    src: slider7,
    alt: "Cardiologia",
    telefono: "3174309873",
  },
  {
    src: slider4,
    alt: "Laboratorio clinico",
    telefono: "3174309873",
  },
];
---

<div class="relative w-full h-full overflow-hidden">
  <div class="relative overflow-hidden">
    <div id="slides-container" class="flex transition-transform duration-500">
      {
        images.map((m) => (
          <div class="w-full flex-shrink-0">
            <a href={`https://api.whatsapp.com/send?phone=${m.telefono}`} target="_blank" class="block w-full h-full">
              <Image
                src={m.src}
                alt={m.alt}
                class="w-full h-full bg-cover bg-center"
                widths={[721, 1080, 1560, 1920, 2260, 2560]}
                sizes="100vw"
              />
            </a>
          </div>
        ))
      }
    </div>
  </div>

  <button
    id="prev"
    class="absolute h-full left-0 top-1/2 -translate-y-1/2 p-2 group"
  >
    <span class="text-2xl text-white">←</span>
    <span
      class="absolute left-0 top-0 bottom-0 w-full bg-gradient-to-r from-black to-transparent opacity-0 group-hover:opacity-50 transition-opacity duration-300"
    ></span>
  </button>

  <button
    id="next"
    class="absolute h-full right-0 top-1/2 -translate-y-1/2 group"
  >
    <span class="text-2xl text-white">→</span>
    <span
      class="absolute right-0 top-0 bottom-0 w-full bg-gradient-to-l from-black to-transparent opacity-0 group-hover:opacity-50 transition-opacity duration-300"
    ></span>
  </button>
</div>

<script>
  const slidesContainer = document.getElementById("slides-container");
  const prevButton = document.getElementById("prev");
  const nextButton = document.getElementById("next");
  let currentSlide = 0;
  const totalSlides = 9;

  function updateSlide() {
    if (slidesContainer) {
      slidesContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
    }
  }

  prevButton?.addEventListener("click", () => {
    currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
    updateSlide();
  });

  nextButton?.addEventListener("click", () => {
    currentSlide = (currentSlide + 1) % totalSlides;
    updateSlide();
  });

  // Auto-play
  setInterval(() => {
    currentSlide = (currentSlide + 1) % totalSlides;
    updateSlide();
  }, 5000);
</script>
